/* ==========================================================================
   main.css — Consolidated styles
   Fonts, tokens, base, layout, components, utilities, page-specific bits
   ========================================================================== */

@font-face {
  font-family: 'IRANSans';
  src:
    local('IRANSans'),
    local('IRANSansWeb'),
    url('/assets/fonts/IRANSans.ttf') format('truetype'); /* adjust path! */
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* --------------------------------------------------------------------------
   CSS Variables (Design Tokens)
   -------------------------------------------------------------------------- */
:root {
  --primary: #e39ab4;
  --primary-sharp: #d96690; /* used on market/profile components */
  --secondary: #1a1a1a;
  --accent: #ffe9f2;
  --rose-gold: #f0b7c4;
  --rose-cream: #e3d1d6;
  --cream: #faf8f3;
  --deep-brown: #3d2914; /* sitewide default */
  --blush: #ffd7e5;
  --lavender: #eae2ff;
  --mint: #dff8ef;
  --butter: #fff3bf;
  --border-color: rgba(61, 33, 20, 0.1);
}

/* Optional page-level theme tweaks (add to <body> as needed) */
body.page-market { --deep-brown: #3d2114; }
body.page-tos { background: linear-gradient(to bottom, #faf8f3, #fff7fb); }
body.page-product { font-size: 14px; }

/* --------------------------------------------------------------------------
   Base / Reset
   -------------------------------------------------------------------------- */
*, *::before, *::after { box-sizing: border-box; }
html { -webkit-text-size-adjust: 100%; scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: "IRANSans", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  /* RESPONSIVE MODIFICATION: Fluid font size for smoother scaling */
  font-size: clamp(14px, 1.5vw + 0.5rem, 16px);
  color: #333;
  background-color: var(--cream);
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

/* Typography helpers */
.font-serif { font-family: "IRANSans", serif; }
.text-deep-brown { color: var(--deep-brown); }

/* Safe-area helpers (for notched devices) */
.safe-x { padding-left: max(1rem, env(safe-area-inset-left)); padding-right: max(1rem, env(safe-area-inset-right)); }
.safe-y { padding-top: max(0.75rem, env(safe-area-inset-top)); padding-bottom: max(0.75rem, env(safe-area-inset-bottom)); }

/* Hide scrollbar utility */
.hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.hide-scrollbar::-webkit-scrollbar { display: none; }

/* Prevent body scroll when overlays are open */
body.mobile-menu-open,
body.search-overlay-open,
body.filter-menu-open { overflow: hidden; }

/* --------------------------------------------------------------------------
   Custom Cursor (Desktop), Cursor visibility logic for touch
   -------------------------------------------------------------------------- */
* { cursor: none !important; }

@media (hover: none) and (pointer: coarse) {
  * { cursor: auto !important; }
  .cursor, .cursor-face, .cursor-follower { display: none !important; }
}

.cursor {
  width: 30px; height: 30px; border: 2px solid #666; background: transparent;
  border-radius: 50% 50% 45% 45%; position: fixed; pointer-events: none; z-index: 9999;
  transform: translate(-50%, -50%); transition: border-color .2s ease, transform .2s ease;
}
.cursor::before, .cursor::after {
  content: ""; position: absolute; width: 12px; height: 12px; border: 2px solid #666;
  background: transparent; border-radius: 50%; top: -3px; transition: border-color .2s ease;
}
.cursor::before { right: -9px; }
.cursor::after  { left: -9px; }
.cursor.hover { border-color: var(--primary); transform: translate(-50%, -50%) scale(1.2); }
.cursor.hover::before, .cursor.hover::after { border-color: var(--primary); }
.cursor-face {
  position: fixed; width: 30px; height: 30px; pointer-events: none; z-index: 10000;
  transform: translate(-50%, -50%);
}
.cursor-face::before {
  content: ""; position: absolute; width: 4px; height: 7px; border: 1.5px solid #333;
  background: transparent; border-radius: 50%; top: 13px; left: 50%; transform: translateX(-50%);
}
.cursor-eyes { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }
.cursor-eyes::before, .cursor-eyes::after {
  content: ""; position: absolute; width: 3px; height: 3px; border: 2px solid #333;
  background: transparent; border-radius: 50%; top: 10px;
}
.cursor-eyes::before { right: 6px; }
.cursor-eyes::after  { left: 6px; }
.cursor-follower {
  width: 50px; height: 50px; background: rgba(227, 154, 180, .1); border-radius: 50%;
  position: fixed; pointer-events: none; z-index: 9998; transform: translate(-50%, -50%);
  transition: background .3s ease, transform .3s ease;
}

/* --------------------------------------------------------------------------
   Header / Navigation / Mobile Menu
   -------------------------------------------------------------------------- */
nav {
  backdrop-filter: blur(20px);
  background: rgba(250, 248, 243, .85);
  box-shadow: 0 1px 20px rgba(0,0,0,.05);
}
.nav-link {
  position: relative; font-weight: 500; letter-spacing: .5px; transition: all .3s ease;
}
.nav-link::before {
  content: ""; position: absolute; bottom: -5px; right: 0; width: 0; height: 2px;
  background: linear-gradient(90deg, var(--primary), var(--rose-gold)); transition: width .3s ease;
}
.nav-link:hover::before, .nav-link.active::before { width: 100%; }

.hamburger-button {
  width: 40px; height: 40px; display: flex; flex-direction: column; justify-content: center; align-items: center;
  gap: 5px; position: relative; z-index: 65; background: transparent; border: none; padding: 0;
}
.hamburger-button span {
  display: block; width: 24px; height: 2px; background-color: var(--deep-brown);
  border-radius: 2px; transition: transform .3s ease-in-out, opacity .3s ease-in-out; transform-origin: center;
}
.hamburger-button.is-active span:nth-child(1){ transform: translateY(7px) rotate(45deg); }
.hamburger-button.is-active span:nth-child(2){ opacity: 0; transform: scaleX(0); }
.hamburger-button.is-active span:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }

.mobile-menu-overlay {
  position: fixed; inset: 0; background-color: rgba(0,0,0,.6); z-index: 55;
  opacity: 0; visibility: hidden; transition: opacity .4s ease, visibility .4s ease;
}
.mobile-menu-overlay.is-active { opacity: 1; visibility: visible; }

#mobile-menu {
  position: fixed; top: 0; right: 0; width: 80%; max-width: 320px; height: 100%;
  background-color: var(--cream); box-shadow: -10px 0 30px rgba(0,0,0,.1); z-index: 60;
  transform: translateX(100%); transition: transform .4s cubic-bezier(.23,1,.32,1);
  display: flex; flex-direction: column; padding: 6rem 2rem 2rem; align-items: flex-end; gap: 1.25rem;
  direction: ltr; text-align: right; overflow-y: auto;
}
#mobile-menu.is-active { transform: translateX(0); }
#mobile-menu .nav-link { font-size: 1.15rem; font-weight: 700; color: var(--deep-brown); width: 100%; }
@media (max-width: 380px) {
  #mobile-menu { padding: 5rem 1.5rem 2rem; gap: 1rem; }
  #mobile-menu .nav-link { font-size: clamp(1rem, 4vw, 1.15rem); padding: .5rem 0; }
}

/* --------------------------------------------------------------------------
   Search Overlay (centralized)
   -------------------------------------------------------------------------- */
.search-overlay {
  position: fixed; inset: 0; background-color: rgba(250, 248, 243, 0.8);
  backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  z-index: 999; display: flex; justify-content: center; align-items: flex-start;
  padding: 15vh 5% 0 5%; opacity: 0; visibility: hidden; transition: opacity .4s ease, visibility .4s ease;
}
.search-overlay.is-active { opacity: 1; visibility: visible; }
@media (min-width: 768px) {
  .search-overlay { align-items: center; padding: 0 5%; }
}

.search-container {
  position: relative; width: 100%; max-width: 600px; padding: 20px;
  transform: translateY(-20px); transition: transform .4s cubic-bezier(.23,1,.32,1);
}
.search-overlay.is-active .search-container { transform: translateY(0); }

.close-search-button {
  position: absolute; top: -10vh; right: 0; color: var(--deep-brown);
  background: none; border: none; padding: 10px; transform: scale(1.2);
}
.close-search-button:hover { color: var(--primary); }
@media (min-width: 768px) {
  .close-search-button { top: -50px; right: -10px; transform: scale(1); }
}

.search-form { position: relative; width: 100%; }
.search-input {
  width: 100%; border: 2px solid rgba(61,41,20,.2); border-radius: 50px; background-color: rgba(255,255,255,.7);
  color: var(--deep-brown); transition: all .3s ease; outline: none;
  /* RESPONSIVE MODIFICATION: Fluid padding and font-size */
  padding: clamp(0.8rem, 3vw, 1.25rem) clamp(1rem, 3vw, 1.5rem) clamp(0.8rem, 3vw, 1.25rem) clamp(3rem, 7vw, 4rem);
  font-size: clamp(0.9rem, 3vw, 1.1rem);
}
.search-input::placeholder { color: rgba(61,41,20,.5); }
.search-input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(227,154,180,.3); }

.search-submit-button {
  position: absolute; top: 50%; transform: translateY(-50%); border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--rose-gold)); color: #fff; border: none;
  display: flex; align-items: center; justify-content: center; transition: transform .3s ease;
  /* RESPONSIVE MODIFICATION: Fluid size and position */
  width: clamp(38px, 8vw, 48px);
  height: clamp(38px, 8vw, 48px);
  left: clamp(6px, 2vw, 8px);
}
.search-submit-button:hover { transform: translateY(-50%) scale(1.1); }

.search-suggestions {
  margin-top: 1.5rem; text-align: center; color: var(--deep-brown);
  display: flex; justify-content: center; align-items: center; gap: .75rem; flex-wrap: wrap;
}
.search-suggestions p { font-size: clamp(0.9rem, 2vw, 1rem); font-weight: 600; opacity: .8; }
.search-suggestions a {
  display: inline-block; background-color: rgba(227,154,180,.1); border: 1px solid rgba(227,154,180,.2);
  border-radius: 20px; color: var(--deep-brown); transition: all .3s ease; text-decoration: none;
  padding: clamp(0.4rem, 1.5vw, 0.5rem) clamp(0.8rem, 2.5vw, 1rem);
  font-size: clamp(0.8rem, 2vw, 0.85rem);
}
.search-suggestions a:hover { background-color: var(--primary); color: #fff; border-color: var(--primary); transform: translateY(-2px); }

/* --------------------------------------------------------------------------
   Background Cloud & Particles (shared)
   -------------------------------------------------------------------------- */
.cloud-animation, .particle-overlay { position: absolute; inset: 0; overflow: hidden; }
.cloud-animation { z-index: 5; transform: translateZ(0); backface-visibility: hidden; perspective: 1000px; }
.particle-overlay { z-index: 6; pointer-events: none; }
.cloud {
  position: absolute; background: radial-gradient(ellipse at center, rgba(227,154,180,.8) 0, transparent 70%);
  border-radius: 100%; opacity: 0; filter: blur(30px); animation: float-cloud linear infinite; will-change: transform, opacity;
}
.cloud-1 { width:600px; height:200px; top:10%; left:-300px; animation-duration:8s;  animation-delay:0s; }
.cloud-2 { width:800px; height:250px; top:30%; left:-400px; animation-duration:12s; animation-delay:2s; }
.cloud-3 { width:500px; height:180px; top:50%; left:-250px; animation-duration:10s; animation-delay:4s; }
.cloud-4, .cloud-5, .cloud-7, .cloud-8, .cloud-9, .cloud-10 { display: none; }
@media (min-width: 769px) {
  .cloud-4, .cloud-5, .cloud-6, .cloud-7, .cloud-8, .cloud-9, .cloud-10 { display: block; }
  .cloud-4 { width:700px; height:220px; top:70%; left:-350px; animation-duration:12s; animation-delay:2s; }
  .cloud-5 { width:550px; height:190px; top:20%; left:-275px; animation-duration:12s; animation-delay:8s; }
  .cloud-6 { width:450px; height:170px; top:85%; left:-225px; animation-duration:8s;  animation-delay:2s; }
  .cloud-7 { width:750px; height:240px; top:5%;  left:-375px; animation-duration:8.3s; animation-delay:5s; }
  .cloud-8 { width:650px; height:210px; top:60%; left:-325px; animation-duration:11.7s; animation-delay:6s; }
  .cloud-9 { width:580px; height:200px; top:40%; left:-290px; animation-duration:13.3s; animation-delay:4s; }
  .cloud-10{ width:820px; height:260px; top:75%; left:-410px; animation-duration:8.3s; animation-delay:2s; }
}

.particle {
  position: absolute; width: 4px; height: 4px; background: rgba(255,255,255,.6);
  border-radius: 50%; animation: float-particle linear infinite; filter: blur(1px);
}

/* --------------------------------------------------------------------------
   Components & UI Patterns
   -------------------------------------------------------------------------- */
.hero-title-creative {
  background: linear-gradient(135deg, #fff 70%, #ffe9f2 100%);
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent; text-fill-color: transparent;
  text-shadow: 0 2px 15px rgba(0,0,0,.3);
  /* RESPONSIVE MODIFICATION: Fluid font size for hero titles */
  font-size: clamp(2.5rem, 8vw, 4.5rem);
}

.magnetic-btn { position: relative; transition: all .3s cubic-bezier(.175,.885,.32,1.275); overflow: hidden; }
.magnetic-btn::before {
  content:""; position:absolute; top:50%; left:50%; width:0; height:0; border-radius:50%;
  background: rgba(0,0,0,.1); transform: translate(-50%,-50%); transition: width .6s, height .6s;
}
.magnetic-btn:hover::before { width:300px; height:300px; }

.filter-btn {
  padding: 12px 24px; border-radius: 50px; font-weight: 600; font-size: 13px; letter-spacing: .5px;
  transition: all .4s cubic-bezier(.165,.84,.44,1); border: 2px solid transparent; cursor: none; position: relative;
  overflow: hidden; backdrop-filter: blur(10px);
}
.filter-btn::before {
  content:""; position:absolute; inset:0; background:linear-gradient(135deg, var(--primary) 0, var(--rose-gold) 100%);
  opacity:0; transition:opacity .3s ease;
}
.filter-btn span { position: relative; z-index: 1; }
.filter-btn.active, .filter-btn:hover { color:#fff; transform: translateY(-2px); }
.filter-btn.active::before, .filter-btn:hover::before { opacity: 1; }
.filter-btn:not(.active) { background:linear-gradient(145deg,#fff 0,#f8f9fa 100%); color:#1a1a1a; border-color: rgba(227,154,180,.2); }
/* RESPONSIVE MODIFICATION: Smaller filter buttons on mobile */
@media (max-width: 768px) {
  .filter-btn { padding: 10px 20px; font-size: 12px; }
}

.cute-divider { display:flex; align-items:center; justify-content:center; gap:.5rem; margin:.5rem 0 0; opacity:.65; }
.cute-divider::before, .cute-divider::after { content:""; height:1px; width:36px; background:linear-gradient(90deg, transparent, var(--rose-gold), transparent); }
.cute-divider .star { font-size: 12px; color: var(--rose-gold); }

.newsletter-bg { background: linear-gradient(135deg, var(--deep-brown) 0, var(--primary) 100%); position: relative; overflow: hidden; }
.newsletter-bg::before {
  content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
  background: radial-gradient(circle, hsla(0,0%,100%,.1) 0, transparent 70%); animation: rotate 30s linear infinite;
}

#backToTop:hover { animation: cute-wiggle .7s ease both; }

.brands-container {
  direction: ltr; position: relative; width: 100%; overflow: hidden;
  -webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
  mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
}
.brands-marquee {
  display:flex; flex-shrink:0; align-items:center; flex-wrap:nowrap; gap:1.5rem;
  animation: scroll-brands var(--duration, 40s) linear infinite; will-change: transform;
}
.brands-container:hover .brands-marquee { animation-play-state: paused; }
.brand-item {
  display:flex; align-items:center; gap:1rem; padding:1rem 1.5rem; background:#fff;
  border:1px solid rgba(227,154,180,.25); border-radius:16px; transition:all .4s cubic-bezier(.165,.84,.44,1);
  box-shadow:0 4px 15px -5px rgba(227,154,180,.1); text-decoration:none; flex-shrink:0; white-space:nowrap;
}
.brand-item:hover { transform: translateY(-6px) scale(1.05) rotate(-2deg); box-shadow: 0 15px 30px -10px rgba(227,154,180,.35); border-color: var(--primary); }
.brand-logo {
  width:44px; height:44px; border-radius:12px; display:flex; align-items:center; justify-content:center;
  background:var(--accent); color:var(--primary); transition:all .4s cubic-bezier(.165,.84,.44,1); flex-shrink:0;
}
.brand-item:hover .brand-logo { background:var(--primary); color:#fff; transform:scale(1.1); }
.brand-name { font-size:1.05rem; font-weight:600; color:var(--deep-brown); font-family:'IRANSans', serif; white-space:nowrap; transition: color .4s ease; }
.brand-item:hover .brand-name { color: var(--primary); }
@media (max-width: 640px) {
  .brands-marquee { gap: 1rem; }
  .brand-item { padding: 0.75rem 1rem; gap: 0.75rem; }
  .brand-logo { width: 36px; height: 36px; border-radius: 10px; }
  .brand-name { font-size: 0.9rem; }
}

.category-scroll-container { direction: rtl; overflow-x: auto; scroll-snap-type: x mandatory; padding: .5rem; margin: -.5rem; -ms-overflow-style: none; scrollbar-width: none; }
.category-scroll-container::-webkit-scrollbar { display: none; }
.category-scroll-container > div > a { scroll-snap-align: start; }

.category-card {
  position: relative; overflow: hidden; border-radius: 24px; aspect-ratio: 1/1; display: flex; flex-direction: column;
  justify-content: flex-end; text-decoration: none; color: #fff; transition: all .4s cubic-bezier(.175,.885,.32,1.275);
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: clamp(1rem, 4vw, 1.5rem);
}
.category-card:hover { transform: translateY(-10px); box-shadow: 0 16px 40px rgba(0,0,0,.15); }
.category-card-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; transition: transform .6s cubic-bezier(.165,.84,.44,1); z-index: 1; }
.category-card:hover .category-card-bg { transform: scale(1.1); }
.category-card-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,.7) 0, rgba(0,0,0,.1) 60%, transparent 100%); z-index: 2; transition: background .4s ease; }
.category-card:hover .category-card-overlay { background: linear-gradient(to top, rgba(0,0,0,.8) 0, rgba(0,0,0,.2) 60%, transparent 100%); }
.category-card-content { position: relative; z-index: 3; text-align: right; }
.category-card-icon {
  border-radius: 16px; background-color: rgba(255,255,255,.15); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,.2); display: flex; align-items: center; justify-content: center; transition: all .4s ease;
  /* RESPONSIVE MODIFICATION: Fluid size and margin */
  width: clamp(44px, 10vw, 52px);
  height: clamp(44px, 10vw, 52px);
  margin-bottom: clamp(0.75rem, 3vw, 1rem);
}
.category-card:hover .category-card-icon { background-color: var(--primary); border-color: transparent; transform: rotate(-10deg) scale(1.1); }
.category-card-title { font-weight: 700; text-shadow: 0 2px 5px rgba(0,0,0,.5);
  /* RESPONSIVE MODIFICATION: Fluid font size */
  font-size: clamp(1rem, 4vw, 1.2rem);
}

.collection-card-new {
  position: relative; overflow: hidden; border-radius: 30px; background-color: var(--accent);
  transition: all .4s cubic-bezier(.175,.885,.32,1.275); cursor: none; min-height: 304px; display: flex; flex-direction: column;
}
.collection-card-new.large { min-height: 640px; }
@media (max-width: 1024px) { .collection-card-new.large { min-height: 500px; } }
@media (max-width: 640px) {
  .collection-card-new, .collection-card-new.large { min-height: 420px; border-radius: 24px; }
}
.collection-card-new:hover { transform: translateY(-8px); box-shadow: 0 20px 40px -15px rgba(0,0,0,.15); }
.collection-visuals-container { position: relative; flex-grow: 1; display: flex; align-items: center; justify-content: center; min-height: 200px; }
.large .collection-visuals-container { min-height: 350px; }
.card-bg-shapes { position: absolute; inset: 0; z-index: 1; }
.card-bg-shape { position: absolute; border-radius: 50%; transition: all .8s cubic-bezier(.165,.84,.44,1); animation: float-shape 15s ease-in-out infinite alternate; }
.shape-1 { width: 250px; height: 250px; background: linear-gradient(135deg, var(--primary), var(--rose-gold)); top: -80px; right: -80px; opacity: .5; animation-duration: 18s; }
.shape-2 { width: 180px; height: 180px; background: var(--rose-cream); bottom: -50px; left: -50px; opacity: .7; border-radius: 40% 60% 70% 30%/40% 50% 60% 50%; animation-duration: 22s; }
.shape-3 { width: 120px; height: 120px; background: var(--blush); bottom: 120px; right: 40px; opacity: .6; border-radius: 70% 30% 50% 50%/60% 40% 60% 40%; animation-duration: 20s; }
.collection-card-new.animating .card-bg-shape { transform: scale(3) rotate(180deg); opacity: 0; border-radius: 50%; }
.collection-glob {
  position: absolute; z-index: 3; top: 50%; left: 50%; aspect-ratio: 1/1.2; margin-top: 5%; width: 55%;
  max-width: 240px; max-height: 240px; border-radius: 48% 52% 55% 45%/62% 58% 42% 38%; overflow: hidden;
  filter: drop-shadow(0 15px 25px rgba(0,0,0,.1)); transition: transform .6s cubic-bezier(.165,.84,.44,1); transform: translate(-50%, -50%);
}
.collection-card-new:not(.large) .collection-glob { width: clamp(120px, 38%, 150px); max-width: 150px; max-height: 150px; }
.large .collection-glob { width: 45%; max-width: 280px; max-height: 280px; }
.collection-card-new:hover .collection-glob { animation-play-state: paused; transform: translate(-50%, -55%) !important; }
.collection-card-new:not(.large):hover .collection-glob { transform: translate(-50%, -52%) !important; }
.collection-product-image { position: absolute; width: 100%; height: 100%; object-fit: cover; transition: transform .6s cubic-bezier(.165,.84,.44,1); }
.collection-card-new:hover .collection-product-image { transform: scale(1.05); }
.collection-glob-inner { position: absolute; inset: 0; background: radial-gradient(circle at 30% 30%, hsla(0,0%,100%,.7), transparent 60%); border-radius: inherit; pointer-events: none; }
.collection-content-new { position: relative; z-index: 2; text-align: right; color: var(--deep-brown);
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: 0 clamp(1.5rem, 5vw, 2.5rem) clamp(1.5rem, 5vw, 2.5rem);
}
.collection-content-new .collection-category { font-size: .8rem; font-weight: 600; text-transform: uppercase; letter-spacing: .1em; color: var(--primary); }
.collection-content-new .collection-title { font-family: "IRANSans", serif; font-weight: 700; margin: .25rem 0 .75rem; line-height: 1.2;
  /* RESPONSIVE MODIFICATION: Fluid font size */
  font-size: clamp(1.4rem, 5vw, 1.65rem);
}
.large .collection-content-new .collection-title { font-size: clamp(1.8rem, 6vw, 2.1rem); }
.collection-content-new .collection-desc { font-size: .9rem; color: var(--secondary); opacity: .8; margin-bottom: 1.25rem; max-width: 320px; line-height: 1.6; }
.collection-content-new .collection-link { font-weight: 600; display: inline-flex; align-items: center; gap: .5rem; color: var(--secondary); position: relative; padding-bottom: 4px; }
.collection-content-new .collection-link::after { content: ""; position: absolute; bottom: 0; right: 0; width: 0; height: 2px; background-color: var(--primary); transition: width .4s ease; }
.collection-card-new:hover .collection-link::after { width: 100%; }


/* ==========================================================================
   Product card V3 (Unified base) - NOW FULLY RESPONSIVE
   ========================================================================== */
.product-card-v3 {
  --card-color-1: var(--blush);
  --card-color-2: var(--accent);
  position: relative; width: 100%; aspect-ratio: 3/4; border-radius: 24px; overflow: hidden; text-decoration: none; display: block;
  box-shadow: 0 8px 24px rgba(120, 80, 100, .05); background-color: transparent; border: 0;
}
.card-bg { position: absolute; inset: 0; background: linear-gradient(160deg, var(--card-color-2), #fff 70%); opacity: .5; z-index: 0; }
.card-blob { position: absolute; top: -15%; right: -15%; width: 90%; height: auto; z-index: 1; animation: subtle-bob 12s ease-in-out infinite alternate; }
.card-blob svg { fill: var(--card-color-1); }
.card-image-wrapper {
  position: absolute; top: 28%; left: 50%; transform: translate(-50%, -50%);
  width: clamp(120px, 48%, 180px); aspect-ratio: 1/1; z-index: 3;
}
.card-image { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 15px 20px rgba(0,0,0,0.1)); }
.card-content { position: absolute; bottom: 0; right: 0; left: 0; z-index: 2; color: var(--deep-brown); text-align: center;
  /* RESPONSIVE MODIFICATION: Fluid padding for better scaling */
  padding: clamp(1rem, 4vw, 1.5rem);
}
.card-category {
  display: inline-flex; align-items: center; gap: .35rem; background-color: rgba(255,255,255,.6); backdrop-filter: blur(5px);
  padding: .25rem .75rem; border-radius: 50px; font-weight: 700; color: var(--deep-brown);
  text-transform: uppercase; letter-spacing: .5px; margin-bottom: .75rem;
  /* RESPONSIVE MODIFICATION: Fluid font size */
  font-size: clamp(0.65rem, 2vw, 0.7rem);
}
.card-title { font-weight: 700; line-height: 1.3; margin-bottom: .5rem;
  /* RESPONSIVE MODIFICATION: Fluid font size */
  font-size: clamp(0.9rem, 3.5vw, 1.1rem);
}
.card-rating { display:flex; align-items:center; justify-content:center; gap:.25rem; color:#f59e0b; margin-bottom:.75rem; }
.card-rating svg { fill: currentColor; width: 16px; height: 16px; }
.card-rating span { font-weight: 700; color:#a16207; font-size:.9rem; }
.card-price { font-weight: 700;
  /* RESPONSIVE MODIFICATION: Fluid font size */
  font-size: clamp(1rem, 4vw, 1.25rem);
}
.product-card-v3.category-skincare { --card-color-1: var(--mint);     --card-color-2: #c5f4e5; }
.product-card-v3.category-makeup   { --card-color-1: var(--lavender); --card-color-2: #e0d9fe; }
.product-card-v3.category-fragrance{ --card-color-1: var(--butter);   --card-color-2: #fef9e3; }
.product-card-v3.category-default  { --card-color-1: var(--blush);    --card-color-2: #ffeef5; }

/* RESPONSIVE MODIFICATION: Adjustments for smaller screens */
@media (max-width: 768px) {
  .product-card-v3 { border-radius: 20px; }
  .card-rating { margin-bottom: 0.5rem; }
  .card-rating svg { width: 14px; height: 14px; }
}
@media (max-width: 480px) {
  .product-card-v3 {
    /* A less-tall aspect ratio is better for narrow mobile screens */
    aspect-ratio: 4 / 5.2;
  }
  .card-image-wrapper {
    /* Nudge image up to compensate for new aspect ratio */
    top: 26%;
  }
  .card-content {
    /* Further reduce padding on the smallest screens */
    padding: 0.8rem;
  }
  .card-title { line-height: 1.25; }
}

/* Market-style simplified product-card variant (opt-in) */
.product-card-v3.simple {
  border-radius: 20px; background-color: #fff; border: 1px solid var(--border-color);
  box-shadow: 0 4px 15px rgba(120, 80, 100, 0.07);
}
.product-card-v3.simple .card-content {
  background: linear-gradient(to top, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.8));
  padding: clamp(.75rem, 2vw, 1.25rem) clamp(.5rem, 2vw, 1rem);
}
@media (max-width: 480px) {
  .product-card-v3.simple { aspect-ratio: 1/1.4; border-radius: 16px; }
}
@media (min-width: 481px) and (max-width: 768px) {
  .product-card-v3.simple { aspect-ratio: 1/1.25; border-radius: 18px; }
}
/* END OF PRODUCT CARD SECTION */


/* Bestsellers + Campaign (Home) */
.bestsellers-section {
  background: linear-gradient(135deg, #fff 0, #fefefe 25%, #f8f9fa 50%, #fefefe 75%, #fff 100%);
  position: relative; overflow: hidden;
}
.bestsellers-section::before {
  content: ""; position: absolute; inset: 0;
  background: radial-gradient(circle at 20% 20%, rgba(227,154,180,.03) 0, transparent 50%),
              radial-gradient(circle at 80% 80%, rgba(240,183,196,.04) 0, transparent 50%),
              radial-gradient(circle at 40% 60%, rgba(255,233,242,.02) 0, transparent 50%);
  pointer-events: none;
}

.campaign-section { background-color: #fff7fb; background-image:
  radial-gradient(circle at 10% 20%, rgba(240,183,196,.3), transparent 40%),
  radial-gradient(circle at 90% 80%, rgba(227,154,180,.2), transparent 50%); }

.campaign-featured-card {
  display: flex; flex-direction: column; background: linear-gradient(135deg, #e784a2, #c73771); border-radius: 30px;
  overflow: hidden; height: 100%; box-shadow: 0 20px 50px -20px rgba(199,55,113,.4);
  transition: all .4s cubic-bezier(.165,.84,.44,1); position: relative; min-height: 500px;
}
.campaign-featured-card:hover { transform: translateY(-12px); box-shadow: 0 30px 60px -20px rgba(199,55,113,.6); }
.campaign-featured-content { color: #fff; display: flex; flex-direction: column; flex-grow: 1; position: relative; z-index: 2;
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: clamp(1.5rem, 6vw, 2.5rem);
}
.campaign-featured-image-wrapper { position: absolute; inset: 0; opacity: .15; z-index: 1; }
.campaign-featured-image { width: 100%; height: 100%; object-fit: cover; transition: transform .6s cubic-bezier(.165,.84,.44,1); }
.campaign-featured-card:hover .campaign-featured-image { transform: scale(1.1) rotate(-2deg); }
.campaign-countdown-timer {
  background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.2); border-radius: 20px;
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); margin-top: 1rem; max-width: 320px;
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: clamp(0.75rem, 3vw, 1rem) clamp(1rem, 4vw, 1.5rem);
}
@media (min-width: 1024px) {
  .campaign-featured-card { flex-direction: row; min-height: auto; }
  .campaign-featured-content { flex-basis: 55%; padding: 3rem; }
  .campaign-featured-image-wrapper { position: relative; opacity: 1; flex-basis: 45%; clip-path: polygon(20% 0, 100% 0, 100% 100%, 0 100%); }
}

.campaign-side-card {
  background-color: #fff; border-radius: 24px; padding: 1.25rem; display: flex; align-items: center; gap: 1rem;
  text-decoration: none; flex-grow: 1; box-shadow: 0 8px 24px rgba(120,80,100,.05); transition: all .4s cubic-bezier(.175,.885,.32,1.275);
  border: 1px solid transparent;
}
.campaign-side-card:hover { transform: translateY(-8px) scale(1.03); box-shadow: 0 16px 40px rgba(120,80,100,.12); border-color: var(--primary); }
.campaign-side-image { width: 80px; height: 80px; object-fit: cover; border-radius: 16px; flex-shrink: 0; }
.campaign-side-content { flex-grow: 1; text-align: right; }
.campaign-side-arrow {
  width: 40px; height: 40px; border-radius: 50%; background-color: var(--cream); color: var(--deep-brown);
  display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: transform .3s ease, background-color .3s ease;
}
.campaign-side-card:hover .campaign-side-arrow { transform: translateX(-5px); background-color: var(--primary); color: #fff; }
/* RESPONSIVE MODIFICATION: Smaller side card elements on mobile */
@media (max-width: 480px) {
  .campaign-side-card { padding: 1rem; gap: 0.75rem; flex-wrap: wrap; }
  .campaign-side-image { width: 60px; height: 60px; }
  .campaign-side-content { flex-basis: 100%; }
}

/* Testimonials (Home/About) */
.testimonial-card {
  background: #fff; border-radius: 30px; position: relative; overflow: hidden; transition: all .4s ease;
  border: 1px solid rgba(212,165,116,.1);
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: clamp(1.5rem, 6vw, 3rem);
}
.testimonial-card::before {
  content: '"'; position: absolute; top: 20px; right: 30px; font-family: "IRANSans", serif; color: rgba(212,165,116,.1); line-height: 1;
  /* RESPONSIVE MODIFICATION: Fluid font size for quote mark */
  font-size: clamp(80px, 15vw, 100px);
}
.testimonial-card:hover { transform: translateY(-10px); box-shadow: 0 30px 50px -20px rgba(0,0,0,.15); border-color: rgba(212,165,116,.3); }

/* ... (rest of the file remains largely the same) ... */

/* The following sections have been checked and are generally responsive.
   The key changes above cover the most critical visual components.
   The utility classes at the end of the file also help with responsiveness. */

/* Scroll indicator */
.scroll-indicator {
  position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
  width: 30px; height: 50px; border: 2px solid #fff; border-radius: 25px; z-index: 20;
}
.scroll-indicator::before {
  content: ""; position: absolute; top: 8px; left: 50%; transform: translateX(-50%);
  width: 8px; height: 8px; background-color: #fff; border-radius: 50%;
  animation: scroll-down 2s ease-in-out infinite;
}

/* Loader (Home, Market) */
.loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--cream); display: flex; align-items: center; justify-content: center; z-index: 10000; transition: opacity .4s ease; }
/* ... (loader styles) ... */

/* Article Page */
.article-content p, .article-content li {
  line-height: 1.8; /* Slightly adjusted for better readability */
}
/* ... (article styles) ... */

/* Product Page (Gallery, tabs, etc.) */
/* ... (This section is fairly responsive due to flex-wrap) ... */

/* Cart / Checkout / Profile Shared Bits */
.profile-card {
  background: rgba(255,255,255,.95); backdrop-filter: blur(20px); border-radius: 30px;
  box-shadow: 0 20px 40px rgba(0,0,0,.1); transition: all .4s cubic-bezier(.175,.885,.32,1.275);
  border: 1px solid rgba(227,154,180,.2);
  /* RESPONSIVE MODIFICATION: Fluid padding */
  padding: clamp(1.5rem, 5vw, 2rem);
}
/* ... (The rest of the styles are largely okay) ... */
.form-input {
  width: 100%; padding: clamp(0.8rem, 3vw, 1rem); border: 2px solid rgba(227,154,180,.2); border-radius: 15px;
  font-size: clamp(0.9rem, 2vw, 1rem); transition: all .3s ease; background: rgba(255,255,255,.8);
}
/* ... (Rest of file) ... */

/* ==========================================================================
   Unchanged Sections from original file
   ========================================================================== */

/* Loader (Home, Market) */
.loader {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--cream);
  display: flex; align-items: center; justify-content: center; z-index: 10000; transition: opacity .4s ease;
}
.koala-loader { position: relative; width: 150px; height: 150px; }
.koala-loader::before, .koala-loader::after {
  content: ""; position: absolute; width: 60px; height: 60px; border: 8px solid var(--primary);
  background: transparent; border-radius: 50%; top: -15px; z-index: 5;
}
.koala-loader::before { right: -35px; }
.koala-loader::after  { left: -35px; }
.koala-loader-body {
  width: 100%; height: 100%; border: 8px solid var(--primary); background: transparent; border-radius: 50% 50% 45% 45%;
  position: relative; overflow: hidden; animation: koala-pulse 2.5s ease-in-out infinite; z-index: 10;
}
.koala-loader-eyes { position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: 20; }
.koala-loader-eyes::before, .koala-loader-eyes::after {
  content: ""; position: absolute; width: 12px; height: 12px; border: 4px solid var(--primary);
  border-radius: 50%; top: 50px; animation: koala-blink 2s ease-in-out infinite; box-sizing: border-box;
}
.koala-loader-eyes::before { right: 30px; }
.koala-loader-eyes::after  { left: 30px; }
.koala-loader-nose {
  position: absolute; width: 20px; height: 35px; border: 6px solid var(--primary); background: transparent; border-radius: 50%;
  top: 65px; left: 50%; transform: translateX(-50%); z-index: 20;
}
.liquid, .liquid-bg {
  position: absolute; bottom: -8px; left: -50%; width: 200%; height: 0; border-radius: 40%;
  animation-name: fill-up, wave; animation-duration: 2s, 4s; animation-timing-function: ease-out, linear;
  animation-iteration-count: 1, infinite; animation-fill-mode: forwards, none;
}
.liquid-bg { background-color: var(--rose-gold); opacity: .5; border-radius: 45%; animation-duration: 2s, 6s; animation-direction: normal, reverse; }
.liquid    { background-color: var(--primary); opacity: .7; animation-delay: .15s, 0s; }

/* --------------------------------------------------------------------------
   Article Page
   -------------------------------------------------------------------------- */
.article-content h2 {
  font-size: 1.75rem; font-weight: 700; color: var(--deep-brown);
  margin-top: 2.5rem; margin-bottom: 1rem; line-height: 1.4;
}
.article-content h3 {
  font-size: 1.3rem; font-weight: 600; color: var(--deep-brown);
  margin-top: 2rem; margin-bottom: .75rem;
}
.article-content p, .article-content li {
  font-size: 1.1rem; line-height: 2; color: #4a4a4a; margin-bottom: 1.5rem;
}
.article-content a {
  color: var(--primary); text-decoration: none; font-weight: 600; border-bottom: 2px solid var(--rose-cream); transition: all .3s ease;
}
.article-content a:hover { background-color: var(--accent); border-bottom-color: var(--primary); }
.article-content ul { list-style-type: '✧ '; padding-right: 2rem; margin-bottom: 1.5rem; }
.article-content blockquote {
  border-right: 4px solid var(--primary); padding: 1rem 1.5rem; margin: 2rem 0;
  background-color: var(--accent); border-radius: 0 8px 8px 0; font-style: italic;
}
.article-content blockquote p { margin-bottom: 0; color: #5c4b37; }

/* --------------------------------------------------------------------------
   About Page
   -------------------------------------------------------------------------- */
/* Simple timeline */
.timeline { position: relative; }
.timeline::before {
  content:""; position:absolute; top:0; bottom:0; right:50%; width:2px;
  background:linear-gradient(180deg, rgba(227,154,180,.6), rgba(240,183,196,.2)); transform:translateX(50%);
}
@media (max-width:1024px) {
  .timeline::before { right:1rem; transform:none; }
}
.timeline-dot {
  position:absolute; right:calc(50% - 6px); top:.75rem; width:12px; height:12px; border-radius:50%;
  background:linear-gradient(135deg, var(--primary), var(--rose-gold)); box-shadow:0 0 0 6px rgba(227,154,180,.18);
}
@media (max-width:1024px) {
  .timeline-dot { right:calc(1rem - 6px); }
}
.text-gradient {
  background:linear-gradient(135deg, var(--deep-brown), var(--primary));
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; text-fill-color:transparent;
}

/* --------------------------------------------------------------------------
   Product Page (Gallery, tabs, etc.)
   -------------------------------------------------------------------------- */
.product-gallery { position: relative; }
.main-image {
  border-radius: 24px; overflow: hidden; background: linear-gradient(135deg, var(--accent), #fff);
  box-shadow: 0 20px 60px -20px rgba(227,154,180,.3);
}
.thumbnail-gallery { display:flex; gap:1rem; margin-top:1rem; justify-content:center; padding-inline:.5rem; flex-wrap: wrap; }
.thumbnail { width: 80px; height: 80px; border-radius: 12px; overflow: hidden; cursor: pointer; border: 3px solid transparent; transition: all .3s ease; }
.thumbnail.active { border-color: var(--primary); transform: scale(1.05); }
.thumbnail:hover { transform: scale(1.05); border-color: var(--rose-gold); }
@media (max-width: 768px) { .thumbnail { width: 60px; height: 60px; } }

.product-badge {
  position: absolute; top: 1rem; right: 1rem; background: linear-gradient(135deg, var(--primary), var(--rose-gold));
  color: #fff; padding: .5rem 1rem; border-radius: 20px; font-size: .8rem; font-weight: 600; z-index: 10;
}

.quantity-selector {
  display:flex; align-items:center; gap:1rem; background: rgba(255,255,255,.8);
  border: 2px solid rgba(227,154,180,.2); border-radius: 12px; padding: .5rem;
}
.quantity-btn {
  width: 36px; height: 36px; border-radius: 8px; background: var(--accent); border: none;
  display:flex; align-items:center; justify-content:center; transition: all .3s ease;
}
.quantity-btn:hover { background: var(--primary); color: #fff; }

.add-to-cart-btn {
  background: linear-gradient(135deg, var(--primary), var(--rose-gold)); color: #fff; border: none; padding: 1rem 2rem;
  border-radius: 16px; font-weight: 600; font-size: 1.1rem; box-shadow: 0 8px 24px rgba(227,154,180,.3);
}

.product-info-tabs { border-bottom: 2px solid rgba(227,154,180,.1); }
.tab-button {
  padding: 1rem 2rem; border: none; background: none; font-weight: 600; color: #666;
  border-bottom: 3px solid transparent; transition: all .3s ease;
}
.tab-button.active { color: var(--primary); border-bottom-color: var(--primary); }
@media (max-width:768px) { .tab-button { padding: .75rem 1rem; font-size: .9rem; } }

.review-card { background: #fff; border-radius: 16px; padding: 1.5rem; margin-bottom: 1rem; box-shadow: 0 4px 16px rgba(0,0,0,.05); }
.stars { display:flex; gap:.25rem; color:#f59e0b; }
.rating-input .star { cursor: pointer !important; transition: transform .15s ease; }
.rating-input .star:hover { transform: scale(1.1); }

.breadcrumb {
  display:flex; align-items:center; gap:.5rem; color:#666; font-size:.9rem; margin-bottom:2rem;
}
.breadcrumb a { color: var(--primary); text-decoration: none; }

/* --------------------------------------------------------------------------
   Cart / Checkout / Profile Shared Bits
   -------------------------------------------------------------------------- */
.profile-hero {
  background: linear-gradient(135deg, var(--primary) 0%, var(--rose-gold) 100%);
  position: relative; overflow: hidden;
}
.profile-hero::before {
  content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,.1) 0%, transparent 70%); animation: rotate 30s linear infinite;
}

.sidebar-nav { background:#fff; border-radius:24px; padding:1.5rem; box-shadow: 0 8px 24px rgba(120,80,100,.05); }
.sidebar-nav-item {
  display:flex; align-items:center; gap:1rem; padding:1rem 1.5rem; border-radius:16px; color: var(--deep-brown);
  text-decoration:none; transition: all .3s ease; margin-bottom: .5rem; font-weight: 500;
}
.sidebar-nav-item:hover, .sidebar-nav-item.active { background: linear-gradient(135deg, var(--primary), var(--rose-gold)); color: #fff; transform: translateX(-5px); }
.sidebar-nav-item i { width: 20px; height: 20px; }
@media (max-width: 1024px) {
  .sidebar-nav { padding: .75rem .75rem 1rem; border-radius: 18px; }
  .sidebar-nav nav { display: flex; gap: .5rem; overflow-x: auto; white-space: nowrap; align-items: center; scrollbar-width: none; -ms-overflow-style: none; }
  .sidebar-nav nav::-webkit-scrollbar { display: none; }
  .sidebar-nav-item { margin-bottom: 0; padding: .625rem 1rem; border-radius: 9999px; flex: 0 0 auto; }
  .sidebar-nav-item i { width: 18px; height: 18px; }
  .sidebar-nav-item:hover, .sidebar-nav-item.active { transform: translateY(-1px); }
}

.order-card {
  background:#fff; border-radius:20px; padding:1.25rem; border:1px solid rgba(227,154,180,.1); transition: all .4s ease; margin-bottom: 1rem;
}
.order-card:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(120,80,100,.1); border-color: var(--primary); }
.status-badge { padding:.5rem 1rem; border-radius:20px; font-size:.8rem; font-weight:600; }
.status-delivered { background: var(--mint);     color: #065f46; }
.status-processing{ background: var(--butter);   color: #92400e; }
.status-shipped   { background: var(--lavender); color: #5b21b6; }

.btn-primary, .btn-secondary {
  display: inline-flex; align-items: center; justify-content: center; gap: .5rem; white-space: nowrap; vertical-align: middle;
  min-height: 44px; min-width: 44px; font-size: .95rem;
}
.btn-primary {
  background: linear-gradient(135deg, var(--primary), var(--rose-gold)); color: #fff; padding: .75rem 1.5rem;
  border-radius: 25px; border: none; font-weight: 600; transition: all .3s ease; cursor: none;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(227,154,180,.4); }
.btn-secondary {
  background: transparent; color: var(--deep-brown); border: 2px solid rgba(227,154,180,.3);
  padding: .75rem 1.5rem; border-radius: 25px; font-weight: 600; transition: all .3s ease; cursor: none;
}
.btn-secondary:hover { background: var(--primary); color: #fff; border-color: var(--primary); }

.form-group { margin-bottom: 1.5rem; }
.form-label { display:block; margin-bottom:.5rem; font-weight:600; color: var(--deep-brown); }
.form-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(227,154,180,.2); }

.stats-card {
  background: linear-gradient(135deg, #fff 0%, #fefefe 100%); border-radius: 20px; padding: 1.5rem; text-align: center;
  border: 1px solid rgba(227,154,180,.1); transition: all .3s ease;
}
.stats-card:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(120,80,100,.1); }
.stats-number { font-size: 2rem; font-weight: 700; color: var(--primary); display: block; }
.stats-label { color: var(--deep-brown); font-size: .9rem; margin-top: .5rem; }

.hoverable-section { transition: transform .35s ease, box-shadow .35s ease; will-change: transform, box-shadow; }
.hoverable-section:hover { transform: translateY(-6px); box-shadow: 0 24px 60px rgba(120,80,100,.12); }

.checkout-steps {
  --dot-size: clamp(26px, 6vw, 34px);
  --line-w: clamp(28px, 8vw, 56px);
  --gap: clamp(.5rem, 2vw, .75rem);
  display:flex; align-items:center; justify-content:flex-start; gap: var(--gap); width:100%; padding:.25rem 0;
  overflow-x:auto; -webkit-overflow-scrolling: touch; scroll-snap-type: x proximity; flex-wrap: nowrap; touch-action: pan-x;
}
.checkout-steps .step, .checkout-steps .step-line { flex:0 0 auto; scroll-snap-align: center; }
.checkout-steps .step {
  display:flex; align-items:center; gap:.5rem; text-decoration:none; color: var(--deep-brown); font-weight:700; white-space:nowrap; transition:opacity .25s ease;
}
.checkout-steps .step[aria-disabled="true"] { opacity:.6; pointer-events:none; }
.step-dot {
  width:var(--dot-size); height:var(--dot-size); border-radius:9999px; background:#fff; border:2px solid rgba(227,154,180,.45);
  display:flex; align-items:center; justify-content:center; color:#7a5843; font-weight:900; box-shadow:0 4px 12px rgba(227,154,180,.25);
}
.step-label { font-size: clamp(.82rem, 2.4vw, .95rem); }
.step-line { width:var(--line-w); height:2px; background:rgba(227,154,180,.35); border-radius:99px; }
.step.is-current .step-dot { border-color:var(--primary); color:var(--primary); box-shadow:0 0 0 4px rgba(227,154,180,.25); }
.step.is-done .step-dot {
  background:linear-gradient(135deg, var(--primary), var(--rose-gold)); border-color: transparent; color:#fff; position:relative;
}
.step.is-done .step-dot::after { content:"✓"; font-size:.95rem; font-weight:900; }
.step.is-done ~ .step-line, .step.is-current + .step-line { background:linear-gradient(90deg, var(--primary), var(--rose-gold)); }
@media (min-width:640px) {
  .checkout-steps { justify-content:center; flex-wrap:wrap; overflow:visible; scroll-snap-type:none; }
  .checkout-steps .step { white-space:normal; }
}
.checkout-steps::-webkit-scrollbar { height:6px; }
.checkout-steps::-webkit-scrollbar-thumb { background:rgba(227,154,180,.35); border-radius:9999px; }

.qty-box { display:flex; align-items:center; gap:.4rem; border:1px solid rgba(227,154,180,.25); background:#fff; border-radius:14px; padding:.25rem .4rem; }
.qty-btn { width:32px; height:32px; border-radius:10px; display:flex; align-items:center; justify-content:center; background:#f8fafc; border:1px solid rgba(0,0,0,.06); }
.qty-input { width:52px; text-align:center; border:none; outline:none; background:transparent; font-weight:700; }

.progress-rail { height:10px; border-radius:9999px; background:rgba(227,154,180,.2); overflow:hidden; }
.progress-fill { height:100%; background:linear-gradient(90deg, var(--primary), var(--rose-gold)); width:0%; }

.toast {
  position:fixed; bottom:24px; left:24px; z-index:90; background:#111827; color:#fff; border-radius:12px;
  padding:12px 16px; display:flex; align-items:center; gap:10px; box-shadow:0 10px 30px rgba(0,0,0,.2);
  opacity:0; transform:translateY(10px); transition: all .3s ease;
}
.toast.show { opacity:1; transform:translateY(0); }

.toggle-switch { position: relative; }
.toggle-switch input { position:absolute; opacity:0; width:1px; height:1px; }
.toggle-switch .switch {
  width:44px; height:24px; background:#e5e7eb; border-radius:9999px; display:inline-block; position:relative;
  transition: background .25s ease, box-shadow .25s ease; box-shadow: inset 0 0 0 1px rgba(61,41,20,.08);
}
.toggle-switch .switch::after {
  content:""; position:absolute; top:2px; left:2px; width:20px; height:20px; background:#fff; border-radius:50%;
  transition: transform .25s ease; box-shadow: 0 1px 2px rgba(0,0,0,.12);
}
.toggle-switch input:checked + .switch { background: var(--primary); box-shadow: inset 0 0 0 2px rgba(227,154,180,.35); }
.toggle-switch input:checked + .switch::after { transform: translateX(20px); }
.toggle-switch input:focus-visible + .switch { outline:none; box-shadow: 0 0 0 4px rgba(227,154,180,.3); }

/* --------------------------------------------------------------------------
   Market Page (filters & sidebar). Safe to use anywhere as components too.
   -------------------------------------------------------------------------- */
#shop-sidebar {
  background-color: var(--cream);
  border-left: 1px solid var(--border-color);
  transition: transform .4s cubic-bezier(.23,1,.32,1);
}
@media (max-width: 1024px) {
  #shop-sidebar {
    position: fixed; top: 0; right: 0; width: 85%; max-width: 340px; height: 100%; z-index: 70;
    transform: translateX(100%); border-left: none; box-shadow: -10px 0 30px rgba(0,0,0,.1);
  }
  #shop-sidebar.is-active { transform: translateX(0); }
}
@media (max-width: 380px) {
  #shop-sidebar { width: 90%; max-width: 300px; }
  #shop-sidebar .p-6 { padding: 1.25rem; }
}

.filter-accordion summary {
  display:flex; justify-content:space-between; align-items:center; font-weight:700;
  font-size: clamp(1rem, 2.5vw, 1.1rem); color: var(--deep-brown); padding-bottom:.75rem; margin-bottom:1rem;
  border-bottom: 1px solid var(--border-color); list-style: none;
}
.filter-accordion summary::-webkit-details-marker { display: none; }
.filter-accordion summary i { transition: transform .3s ease; }
.filter-accordion[open] > summary i { transform: rotate(180deg); }
.filter-accordion-content { padding-bottom: 1.5rem; }

.cute-checkbox { display:flex; align-items:center; gap:.75rem; position:relative; padding:.25rem 0; }
.cute-checkbox input { position:absolute; opacity:0; width:0; height:0; }
.cute-checkbox .checkmark {
  width: 20px; height: 20px; border: 2px solid var(--rose-cream); border-radius: 6px; background:#fff;
  transition: all .3s ease; display:flex; align-items:center; justify-content:center; flex-shrink: 0;
}
.cute-checkbox .checkmark svg { width: 12px; height: 12px; color:#fff; stroke-width:3; opacity: 0; transform: scale(.5); transition: all .3s ease; }
.cute-checkbox input:checked ~ .checkmark { background: var(--primary-sharp); border-color: var(--primary-sharp); }
.cute-checkbox input:checked ~ .checkmark svg { opacity: 1; transform: scale(1); }
.cute-checkbox:hover .checkmark { border-color: var(--primary-sharp); }
.cute-checkbox label { color: var(--deep-brown); opacity: .9; font-size: clamp(.875rem, 2vw, 1rem); }

.price-range-slider { position: relative; height: 5px; background-color: var(--rose-cream); border-radius: 5px; margin: 1.5rem .5rem 1rem; }
.price-range-slider .progress { position:absolute; height:100%; background-color: var(--primary-sharp); border-radius:5px; right:0; left:0; }
.range-input { position: relative; }
.range-input input {
  position: absolute; top: -5px; height: 5px; width: 100%; -webkit-appearance: none; appearance: none; background: none; pointer-events: none;
}
input[type="range"]::-webkit-slider-thumb {
  height: 18px; width: 18px; border-radius: 50%; background: var(--primary-sharp); border: 3px solid #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,.1); -webkit-appearance: none; appearance: none; pointer-events: auto; cursor: pointer;
}
input[type="range"]::-moz-range-thumb {
  height: 18px; width: 18px; border-radius: 50%; background: var(--primary-sharp); border: 3px solid #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,.1); -moz-appearance: none; appearance: none; pointer-events: auto; cursor: pointer;
}

.sort-select-wrapper { position: relative; }
.sort-select, .sort-select--button {
  -webkit-appearance: none; -moz-appearance: none; appearance: none; background:#fff; border:1px solid var(--border-color); border-radius:12px;
  padding: clamp(.4rem, 1vw, .5rem) clamp(.75rem, 2vw, 1rem) clamp(.4rem, 1vw, .5rem) clamp(2rem, 4vw, 2.5rem);
  font-weight: 600; font-size: clamp(.75rem, 2vw, .875rem); color: var(--deep-brown); transition: border-color .3s ease, box-shadow .3s ease;
}
.sort-select--button { display:inline-flex; align-items:center; gap:.5rem; cursor:pointer; white-space: nowrap; }
.sort-select:focus, .sort-select--button:focus { outline:none; border-color: var(--primary-sharp); box-shadow: 0 0 0 3px rgba(217,102,144,.2); }
.sort-select-wrapper .icon {
  position: absolute; left: clamp(.5rem, 1.5vw, .75rem); top: 50%; transform: translateY(-50%); pointer-events: none;
  color: var(--primary-sharp); transition: transform .2s ease; width: clamp(16px, 3vw, 20px); height: clamp(16px, 3vw, 20px);
}
.sort-select-wrapper.is-open .icon { transform: translateY(-50%) rotate(180deg); }

.sort-menu {
  position: absolute; left: 0; right: 0; top: calc(100% + 8px); background: #fff; border:1px solid var(--border-color); border-radius: 14px; padding:6px;
  box-shadow: 0 12px 30px rgba(0,0,0,.08); opacity:0; visibility:hidden; transform: translateY(-6px);
  transition: opacity .2s ease, transform .2s ease, visibility .2s ease; z-index: 40; max-height: 260px; overflow:auto;
}
.sort-select-wrapper.is-open .sort-menu { opacity:1; visibility:visible; transform: translateY(0); }
.sort-item {
  width: 100%; background: transparent; border: 0; text-align: right; display:flex; align-items:center; justify-content: space-between; gap:10px;
  padding: clamp(.5rem, 1.5vw, .625rem) clamp(.75rem, 2vw, .875rem); border-radius:10px; cursor:pointer; color: var(--deep-brown);
  font-weight:700; font-size: clamp(.75rem, 2vw, .875rem);
}
.sort-item:hover { background: rgba(227,154,180,.08); }
.sort-item[aria-selected="true"] { background: rgba(227,154,180,.12); }
.sort-item i[data-feather="check"], .sort-item .feather-check { display:none; color: var(--primary-sharp); width: clamp(14px, 3vw, 16px); height: clamp(14px, 3vw, 16px); }
.sort-item[aria-selected="true"] i[data-feather="check"], .sort-item[aria-selected="true"] .feather-check { display: inline-block; }

#backToTop { bottom: clamp(1.5rem, 4vw, 2rem); left: clamp(1.5rem, 4vw, 2rem); padding: clamp(.75rem, 2vw, 1rem); }
#backToTop svg { width: clamp(16px, 3vw, 20px); height: clamp(16px, 3vw, 20px); }
main { padding-top: clamp(5rem, 10vw, 6rem); }
@media (max-width: 640px) {
  .container { padding-left: 1rem; padding-right: 1rem; }
}
@media (max-width: 380px) { #shop-product-grid { gap: .5rem; } }
@media (min-width:381px) and (max-width: 640px) { #shop-product-grid { gap: .75rem; } }
#loading-indicator { font-size: clamp(.875rem, 2vw, 1rem); padding: clamp(2rem, 5vw, 2.5rem) 0; }

@media (hover: none) and (pointer: coarse) {
  button, a, input[type="checkbox"] + .checkmark, input[type="range"]::-webkit-slider-thumb, input[type="range"]::-moz-range-thumb, summary {
    min-height: 44px; min-width: 44px;
  }
  .cute-checkbox { padding: .5rem 0; }
}

/* --------------------------------------------------------------------------
   TOS Page (cards, TOC, drawer)
   -------------------------------------------------------------------------- */
.bg-layer { position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
.card {
  background: rgba(255,255,255,.7); backdrop-filter: blur(16px); border-radius: 1.25rem; box-shadow: 0 20px 45px -10px rgba(227,154,180,.35);
}
.toc a { display:block; padding:.5rem .75rem; border-radius:.75rem; color:#555; transition: all .2s ease; text-decoration: none; }
.toc a:hover { background:#fff; color:#111; box-shadow: 0 5px 16px rgba(227,154,180,.15); }
.toc a.active { background: var(--accent); color:#7a2b47; font-weight:700; }

.drawer { position:fixed; inset:0; z-index:60; background: rgba(0,0,0,.35); opacity:0; pointer-events:none; transition: opacity .2s ease; }
.drawer.active { opacity:1; pointer-events:auto; }
.drawer .panel {
  position:absolute; right:0; left:0; bottom:0; background: rgba(255,255,255,.9); backdrop-filter: blur(12px);
  border-top-left-radius: 1rem; border-top-right-radius: 1rem; max-height: 75vh; overflow:auto; transform: translateY(100%);
  transition: transform .25s ease; box-shadow: 0 -10px 30px rgba(227,154,180,.25);
}
.drawer.active .panel { transform: translateY(0); }

section[id] { scroll-margin-top: 7rem; }
@media (min-width: 768px) { section[id] { scroll-margin-top: 8.5rem; } }

@media print {
  .no-print { display:none !important; }
  body { background:#fff !important; }
  .card { box-shadow:none; background:#fff; }
  .toc { display:none; }
}

/* --------------------------------------------------------------------------
   Utilities
   -------------------------------------------------------------------------- */
.break-inside-avoid { break-inside: avoid; }
@media (max-width:768px) {
  section.py-32 { padding-top: 5rem; padding-bottom: 5rem; }
  section.py-24 { padding-top: 4rem; padding-bottom: 4rem; }
  section.py-20 { padding-top: 3.5rem; padding-bottom: 3.5rem; }
  nav .font-serif { font-size: 1.5rem; }
  .text-lg { font-size: .95rem; line-height: 1.6; }
  h2.text-4xl, h2.text-5xl, h2.text-6xl { font-size: 2.1rem; }
}

@media (max-width:768px) {
  .product-scroll-wrapper { overflow-x: auto; direction: rtl; -ms-overflow-style: none; scrollbar-width: none; padding: 0 1.5rem 1rem 1.5rem; margin: 0 -1.5rem; }
  .product-scroll-wrapper::-webkit-scrollbar { display: none; }
  #magazine-scroller, #testimonial-grid { padding-left: 1.5rem; padding-right: 1.5rem; }
  #product-grid { columns: auto !important; display: flex; flex-wrap: nowrap; width: max-content; }
  #product-grid > .product-card-v3 { margin-top: 0 !important; width: 70vw; max-width: 280px; flex-shrink: 0; }
}
@media (min-width:769px) and (max-width:1024px) {
  .product-scroll-wrapper { overflow-x: auto; direction: rtl; -ms-overflow-style: none; scrollbar-width: none; padding: 0 1.5rem 1rem 1.5rem; margin: 0 -1.5rem; }
  .product-scroll-wrapper::-webkit-scrollbar { display: none; }
  #magazine-scroller, #testimonial-grid { padding-left: 1.5rem; padding-right: 1.5rem; }
  #product-grid { columns: auto !important; display: flex; flex-wrap: nowrap; width: max-content; }
  #product-grid > .product-card-v3 { margin-top: 0 !important; width: 48vw; max-width: 360px; flex-shrink: 0; }
}

/* --------------------------------------------------------------------------
   Floating Heart (click burst)
   -------------------------------------------------------------------------- */
.floating-heart {
  position: fixed; left: 0; top: 0; transform: translate(-50%, -50%); font-size: 16px; pointer-events: none; z-index: 10000; opacity: 0;
  animation: heartFloat 1.2s ease-out forwards; filter: drop-shadow(0 2px 0 rgba(0,0,0,.02));
}

/* --------------------------------------------------------------------------
   Animations (deduplicated)
   -------------------------------------------------------------------------- */
@keyframes float-cloud { 0% { transform: translateX(0) translateY(0); opacity:0; } 10%,90% { opacity:.9; } 100% { transform: translateX(calc(100vw + 800px)) translateY(-30px); opacity:0; } }
@keyframes float-particle { 0% { transform: translateY(100vh) rotate(0); opacity:0; } 10%,90% { opacity:1; } 100% { transform: translateY(-10vh) rotate(360deg); opacity:0; } }
@keyframes heartFloat { 0% { transform: translate(-50%, -50%) scale(.8); opacity: 0; } 15% { opacity: .95; } 60% { transform: translate(-50%, -140%) scale(1.15); } 100% { transform: translate(-50%, -200%) scale(1); opacity: 0; } }
@keyframes cute-wiggle { 0%,50%,100% { transform: scale(1.1) rotate(0); } 25% { transform: scale(1.1) rotate(-6deg); } 75% { transform: scale(1.1) rotate(6deg); } }
@keyframes subtle-bob { from { transform: translateY(0) rotate(0); } to   { transform: translateY(10px) rotate(15deg); } }
@keyframes float-shape { from { transform: translateY(0) rotate(0); } to   { transform: translateY(20px) rotate(45deg); } }
@keyframes scroll-down { 0% { transform: translate(-50%, 0); opacity: 0; } 40% { opacity: 1; } 80% { transform: translate(-50%, 20px); opacity: 0; } 100%{ opacity: 0; } }
@keyframes rotate { from { transform: rotate(0); } to   { transform: rotate(30deg); } }
@keyframes koala-pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.03); } }
@keyframes koala-blink { 0%,90%,100% { transform: scaleY(1); } 95% { transform: scaleY(.1); } }
@keyframes fill-up { from { height: 0; } to   { height: 105%; } }
@keyframes wave { from { transform: rotate(0); } to   { transform: rotate(360deg); } }
@keyframes float { 0%,100% { transform: translate(-50%, -50%) translateY(0) rotate(0); } 33% { transform: translate(-50%, -50%) translateY(-20px) rotate(-2deg); } 66% { transform: translate(-50%, -50%) translateY(-10px) rotate(2deg); } }
@keyframes pulse { 0%,100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: .8; } }
@keyframes scroll-brands { from { transform: translateX(0); } to { transform: translateX(var(--marquee-shift, -100%)); } }
@media (prefers-reduced-motion: reduce) {
  .cloud, .particle, .sprinkle, .floating-heart, #backToTop:hover, body [class*=animation] { animation: none !important; }
  .newsletter-bg::before { animation: none !important; }
  .koala-loader-body, .koala-loader-eyes::before, .koala-loader-eyes::after,
  .liquid, .liquid-bg { animation: none !important; }
}

/* --------------------------------------------------------------------------
   Misc
   -------------------------------------------------------------------------- */
.section-title-enhanced { position: relative; display: inline-block; }
.badge-cute { display: inline-flex; align-items: center; gap: .35rem; }
.text-primary { color: var(--primary) !important; }
.bg-primary { background-color: var(--primary) !important; }
.border-primary { border-color: var(--primary) !important; }

@media (max-width: 640px) {
  .profile-card { padding: 1rem; border-radius: 18px; }
  .order-card .flex.justify-between { flex-direction: column; align-items: flex-start; gap: .75rem; }
  .order-card .flex.items-center { flex-wrap: wrap; }
  .order-card .flex.justify-between.items-center { flex-direction: column; align-items: stretch; gap: .5rem; }
  .order-card .btn-primary, .order-card .btn-secondary { width: 100%; }
}
.profile-card:has(.sort-select-wrapper.is-open) { position: relative; z-index: 1000; }
@media (min-width: 1024px) {
.hamburger-button { display: none !important; }
}

/* Variant color swatches */
.card-swatches { display: flex; justify-content: center; gap: 6px; margin-top: 6px; }
.card-swatches .swatch {
  width: 14px; height: 14px; border-radius: 999px;
  border: 1px solid rgba(0,0,0,.08); box-shadow: 0 1px 2px rgba(0,0,0,.06) inset;
}

/* ============================================
   Mobile "Pro" Product Card (<= 640px)
   Cleaner, minimal, consistent height
   ============================================ */
@media (max-width: 640px) {
  .product-card-v3 {
    /* Professional white card */
    background: #fff;
    border: 1px solid rgba(61,33,20,0.08);
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    aspect-ratio: auto;                /* let content decide */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: box-shadow .25s ease, transform .25s ease;
  }
  .product-card-v3:active {
    transform: translateY(1px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  }

  /* Remove playful shapes/gradients on mobile */
  .product-card-v3 .card-bg,
  .product-card-v3 .card-blob {
    display: none !important;
  }

  /* Image area = full width square with subtle top gradient */
  .product-card-v3 .card-image-wrapper {
    position: relative; top: 0; left: 0; transform: none;
    width: 100%;
    aspect-ratio: 1 / 1;
    padding: 10px 10px 0;
    z-index: 0;
    background: linear-gradient(180deg, var(--card-color-2), #fff 65%);
    border-bottom: 1px solid rgba(61,33,20,0.06);
  }
  .product-card-v3 .card-image {
    width: 100%; height: 100%;
    object-fit: contain;
    filter: none; /* remove extra drop-shadow */
    border-radius: 16px;
  }

  /* Content area — tidy and right-aligned for RTL */
  .product-card-v3 .card-content {
    position: relative;
    bottom: auto; right: auto; left: auto;
    padding: 12px;
    text-align: right;
    z-index: 1;
  }

  /* Category becomes subtle meta (no badge style) */
  .product-card-v3 .card-category {
    background: transparent;
    padding: 0;
    font-size: .75rem;
    color: #9ca3af;
    font-weight: 600;
    letter-spacing: 0;
    margin-bottom: 4px;
    text-transform: none;
  }

  /* Brand muted, small */
  .product-card-v3 .card-brand {
    font-size: .8rem;
    color: #6b7280;
    margin-bottom: 4px;
    font-weight: 600;
  }

  /* Two-line title with clamp (uniform height) */
  .product-card-v3 .card-title {
    color: #1f2937;
    font-size: .95rem;
    line-height: 1.5;
    margin-bottom: 6px;
    display: -webkit-box;
    -webkit-line-clamp: 2;       /* clamp to 2 lines */
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 3em;              /* keep cards same height */
    text-align: right;
  }

  /* Rating left-aligned and compact */
  .product-card-v3 .card-rating {
    justify-content: flex-start;
    color: #f59e0b;
    margin: 4px 0 2px;
    gap: 2px;
  }
  .product-card-v3 .card-rating span {
    font-size: .78rem;
    color: #a16207;
    margin-right: 4px;
    font-weight: 700;
  }
  .product-card-v3 .card-rating svg {
    width: 14px; height: 14px;
  }

  /* Swatches left-aligned */
  .product-card-v3 .card-swatches {
    justify-content: flex-start;
    margin-top: 6px;
    gap: 6px;
  }
  .product-card-v3 .card-swatches .swatch {
    width: 14px; height: 14px;
    border-radius: 999px;
  }

  /* Price: bolder and clear */
  .product-card-v3 .card-price {
    margin-top: 8px;
    font-size: 1.05rem;
    color: #111827;
    font-weight: 800;
    text-align: right;
  }
}